<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Breath</title>
  </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <style media="screen">
      body{
        position: relative;
        padding: 0;
        margin: 0;
      }
      .breath{
        position: relative;
        padding: 1px;
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;

      }
      .openMenu{
        position: absolute;
        height: 50px;
        width: 40px;
        top: 0px;
        right: 0px;
        display: none;
      }
      .openMenu img{
        position: relative;
        height: 100%;
        width: 100%;
        filter: drop-shadow(1px 1px 2px black);
        cursor: pointer;
        transition: .4s;
      }
      .openMenu img:hover{
        filter: drop-shadow(2px 2px 3px black);
        transition: .4s;
      }
      .openMenu img:active{
        filter: drop-shadow(1px 1px 2px black);
        transition: .4s;
      }
      .closeMenu{
        position: absolute;
        height: 50px;
        width: 40px;
        top: 0px;
        right: 0px;
      }
      .closeMenu img{
        position: relative;
        height: 100%;
        width: 100%;
        filter: drop-shadow(1px 1px 2px black);
        cursor: pointer;
        transition: .4s;
      }
      .closeMenu img:hover{
        filter: drop-shadow(2px 2px 3px black);
        transition: .4s;
      }
      .closeMenu img:active{
        filter: drop-shadow(1px 1px 2px black);
        transition: .4s;
      }
      .menu{
        position: fixed;
        width: 300px;
        height: calc(100% - 70px);
        top: 70px;
        right: 0px;
        background-color:yellow ;
      }
      .menu button{
        position: relative;
        padding: 4px;
        background-color: brown;
        margin: 8px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.3em;
      }
      .itemMenu{
        position: relative;
        width: 90%;
        background-color: green;
        left: 50%;
        margin: 4px 0px;
        transform: translateX(-50%);
      }
      .containerItemsMenu{
        position: relative;
        padding: 1px;
        display: flex;
        justify-content:space-between;
        align-items: center;
        margin: 4px 0px;
      }
      .containerItemsMenu input{
        height: 30px;
        width: 170px;
        padding-left: 5px;
        font-size: 1.2em;
      }
      .containerItemsMenu label{
        font-size: 1.2em;

      }
      .dadContainer{
        position: relative;
        width: 460px;
        height: 600px;
      }
      .container{
        position: relative;
        width: 460px;
        height: 500px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(182,149,192,.5);
      }
      .container img{
        position: relative;
        width: 100%;
        height: 100%;
        z-index: 10;
      }
      .animationBreath{
        animation: animate 0s linear infinite;
     }
     @keyframes animate {
       0%{
         box-shadow: 0 0 0 5px rgba(182,149,192,.3),0 0 0 10px rgba(182,149,192,.3),
         0 0 0 15px rgba(182,149,192,.3),0 0 0 20px rgba(182,149,192,.3),0 0 0 25px rgba(182,149,192,.3);
       }
       50%{
         box-shadow: 0 0 0 50px rgba(182,149,192,.3),0 0 0 80px rgba(182,149,192,.3),
         0 0 0 110px rgba(182,149,192,.3),0 0 0 140px rgba(182,149,192,.3),0 0 0 170px rgba(182,149,192,.3);
       }
       100%{
         box-shadow: 0 0 0 5px rgba(182,149,192,.3),0 0 0 10px rgba(182,149,192,.3),
         0 0 0 15px rgba(182,149,192,.3),0 0 0 20px rgba(182,149,192,.3),0 0 0 25px rgba(182,149,192,.3);
       }
     }
     .center{
       position: absolute;
       top: 50%;
       left: 50%;
       transform: translate(-50%,-50%);
       width: 100px;
       height: 100px;
       border-radius: 100%;
       background: rgba(182,149,192,0.8);
       z-index: 9;
     }
     .containerButtons{
        position: relative;
        width: 460px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .bg{
        position: relative;
        padding: 1px;
        height: 100px;
        width: 100px;
        padding: 0px 5px;
      }
      .bg img{
        position: relative;
        height: 100%;
        width: 100%;
        filter: drop-shadow(0px 0px 2px black);
      }
      .bg img:hover{
        filter: drop-shadow(2px 2px 3px black);
      }
      .bg img:active{
        filter: drop-shadow(0px 0px 2px black);
      }
      .number{
        position: relative;
        height: 100px;
        width: 130px;
        left: 15px;
        padding: 0px 5px;
      }
      .number h1{
        position: relative;
        font-size: 5em;
        height: 100%;
        width: 100%;
        text-align: center;
        margin: 0;
      }
    </style>

    <section class="breath">
      <div class="openMenu" id="openMenu">
        <img src="Img/MenuIcon.png" alt="">
      </div>
      <div class="closeMenu" id="closeMenu">
        <img src="Img/MenuIconsClouse.png" alt="">
      </div>

      <div class="menu" id="menu">
        <div class="itemMenu">
          <div class="containerItemsMenu">
            <label for="">Start</label>
            <input type="text" name="" value="" id="startInput">
          </div>
          <div class="containerItemsMenu">
            <label for="">Jump</label>
            <input type="text" name="" value="" id="jumpInput">
          </div>
        <!--  <div class="containerItemsMenu">
            <label for="">Breath</label>
            <input type="text" name="" value="" id="breathInput">
          </div> -->
          <button type="button" name="button" id="enter">Enter</button>

        </div>
      </div>

      <div class="dadContainer">
        <div class="container">
          <img src="Img/Body.png" alt="">
          <div class="center" id="center">
          </div>
        </div>

        <div class="containerButtons">
          <div class="bg" id="start">
          <img src="Img/Button.png" alt="">
        </div>
        <div class="number" id="number">
          <h1>10</h1>
        </div>
        </div>
      </div>
    </section>

    <script type="text/javascript">

      var number = 10;
      var menu = document.getElementById('menu');
      var openMenu = document.getElementById('openMenu');
      var closeMenu = document.getElementById('closeMenu');
      var enter = document.getElementById('enter');
      var startInput = document.getElementById('startInput');
      var jumpInput = document.getElementById('jumpInput');
      var breathInput = document.getElementById('breathInput');
      var animationBreath = document.getElementsByClassName('animationBreath')[0];



/*----------------------------------------------------------------------------*/
/*-------------------------- Click Botton start ------------------------------*/
/*----------------------------------------------------------------------------*/
  var numberClass = document.getElementById('number');
  var center = document.getElementById('center');
  var start = document.getElementById('start');

  var noRounds = 10;
  var jumpNumber = 2;
  var restTimeMin = 2;

  var timesBreath = 3;
  var timesCurrentBreath = 0;
  var secBreathDuration = 8;

  var timesLastBreath = 2;
  var timesLastCurrentBreath = 0;
  var secLastBreathDuration = 4;

  var holdBreath = 6;
  var holdCurrentBreath = 0;


  numberClass.innerHTML = timesBreath;
  numberClass.style.fontSize = "5em";
  numberClass.style.textAlign = "center";
  start.addEventListener("click",async function(){
    await breath();
    await lastBreath();
    await  test();
    })
   async function breath (){
    center.classList.add("animationBreath");
    center.style.animationDuration = (secBreathDuration ) + "s";
    start.style.display = "none";

    while (timesCurrentBreath < timesBreath) {
      console.log("timesBreath: " + timesBreath + " timesCurrentBreath: " + timesCurrentBreath);
      numberClass.innerHTML = timesBreath - timesCurrentBreath;
      timesCurrentBreath = timesCurrentBreath + 1;
      numberClass.style.fontSize = "5em";
      numberClass.style.textAlign = "center";
      await wait(secBreathDuration);
    }
    center.classList.remove("animationBreath");
  }
   async function lastBreath (){
   center.classList.add("animationBreath");
   center.style.animationDuration = secLastBreathDuration+ "s";
   while (timesLastCurrentBreath < timesLastBreath) {
     console.log("timesLastBreath: " + timesLastBreath + " timesLastCurrentBreath: " + timesLastCurrentBreath);

     numberClass.innerHTML = (timesLastBreath - timesLastCurrentBreath) + " Faster!";
     numberClass.style.fontSize = "3em";
     numberClass.style.textAlign = "center";
     timesLastCurrentBreath = timesLastCurrentBreath + 1;
     await wait(secLastBreathDuration);
   }

   center.classList.remove("animationBreath");
  }
  function test(){
    alert("Buenas");
  }
/*   function holdBreath(){
    alert("entramos");
  while (holdCurrentBreath < holdBreath) {
    console.log("holdBreath: " + holdBreath + " holdCurrentBreath: " + holdCurrentBreath);

    numberClass.innerHTML = (holdBreath - holdCurrentBreath) + " Hold!";
    numberClass.style.fontSize = "3em";
    numberClass.style.textAlign = "center";
    holdCurrentBreath = holdCurrentBreath + 1;
  //  await wait(3);
  }

}*/


  function wait(sec) {
    var ms = sec * 1000;
  return new Promise(resolve => setTimeout(resolve, ms));
  }


/*------------------------ Get jump and start values -------------------------*/
      function getValue(){
        $.ajax( "App/Controller/Controller.php", {
          data: {
            module: "getValue"
          },
          success: function(data){
            alert(data);
         }
        }
        )
      }



/*----------------------------------------------------------------------------*/
/*----------------------------------- Menu -----------------------------------*/
/*----------------------------------------------------------------------------*/

    //   openMenu.style.display = "block";
       closeMenu.style.display = "none";
       menu.style.display = "none";

       openMenu.addEventListener("click", function(){
         openMenu.style.display = "none";
         closeMenu.style.display = "block";
         menu.style.display = "block";
       })
       closeMenu.addEventListener("click",function(){
         openMenu.style.display = "block";
         closeMenu.style.display = "none";
         menu.style.display = "none";
       })

       enter.addEventListener("click",function(){
         if (isNaN(startInput.value) || isNaN(jumpInput.value) ) {
           alert("No es un Valor numerico");
         }
         else {
           if (startInput.value == "" || jumpInput.value == "" ) {
             alert("Ingrese todos los campos");
           }
           else {
             $.ajax( "App/Controller/Controller.php", {
               type: 'post',
               async: false,
               data: {
                 module: "setValue",
                 start: startInput.value,
                 jump: jumpInput.value,
               },
               success: function(data){
                 alert(data);
              }
             }
             )
           }

         }
        /* alert(startInput.value + jumpInput.value + breathInput.value);*/
         //animationBreath.style.animationDuration = "8s";

       })

    </script>
  </body>
</html>
